(()=>{var e={};e.id=632,e.ids=[632],e.modules={762:e=>{"use strict";e.exports=import("@neondatabase/serverless")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1873:(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{POST:()=>p});var a=t(6396),o=t(762),n=t(3089),i=t(872),d=t(4911),u=e([o,n]);[o,n]=u.then?(await u)():u;let c=process.env.DATABASE_URL;if(!c)throw Error("DATABASE_URL environment variable is required");let l=(0,o.neon)(c),m=(0,n.fd)(l);async function p(e){try{let s=await e.json(),t=d.zx.safeParse(s);if(!t.success)return a.NextResponse.json({success:!1,message:"Data tidak valid",error:t.error.errors.map(e=>e.message).join(", ")},{status:400});let{url:r}=t.data,o=e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||"127.0.0.1";if(["nordvpn","expressvpn","surfshark","cyberghost","privateinternetaccess","tunnelbear","protonvpn","hotspotshield","windscribe","ipvanish","purevpn","vyprvpn","mullvad","perfectprivacy","hide.me"].some(e=>o.includes(e))||["192.168.","10.","172.16.","172.17.","172.18.","172.19.","172.20.","172.21.","172.22.","172.23.","172.24.","172.25.","172.26.","172.27.","172.28.","172.29.","172.30.","172.31.","127.","169.254.","224.","239.","255.255.255.255"].some(e=>o.startsWith(e))||["8080","3128","1080","8888","9050"].some(e=>o.includes(`:${e}`)))return a.NextResponse.json({success:!1,message:"Silakan matikan VPN atau proxy Anda untuk menggunakan layanan ini. Kami perlu memverifikasi lokasi Anda untuk keamanan.",error:"VPN_BLOCKED"},{status:403});let n=new Date;n.setHours(0,0,0,0);let u=await m.select().from(d.pv).where((0,i.Uo)((0,i.eq)(d.pv.ipAddress,o),(0,i.RO)(d.pv.createdAt,n)));if(u.length>=5)return a.NextResponse.json({success:!1,message:"Anda sudah mencapai batas 5 boost per hari. Silakan coba lagi besok.",data:{viewsAdded:0,status:"blocked",processingTime:"0ms",boostsToday:u.length,boostsRemaining:0}},{status:429});let p=Date.now(),c=await m.insert(d.pv).values({url:r,ipAddress:o,status:"pending",viewsAdded:0}).returning(),l="1000";try{let e=await fetch("https://n1panel.me/api/v2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"1f0195dc7cea14eefe8c40af25c5b4a6",action:"add",service:"14",link:r,quantity:l})});if(!e.ok)throw Error(`API responded with status: ${e.status}`);let s=await e.json(),t=`${Date.now()-p}ms`;if(s.order){await m.update(d.pv).set({status:"completed",viewsAdded:parseInt(l),processingTime:t,orderId:s.order.toString()}).where((0,i.eq)(d.pv.id,c[0].id));let e={success:!0,message:`Berhasil! ${l} views sedang diproses untuk video Anda.`,data:{viewsAdded:parseInt(l),status:"completed",processingTime:t,orderId:s.order.toString(),boostsToday:u.length+1,boostsRemaining:4-u.length}};return a.NextResponse.json(e)}throw Error(s.error||"Unknown API error")}catch(t){let e=`${Date.now()-p}ms`;await m.update(d.pv).set({status:"failed",processingTime:e,errorMessage:t.message}).where((0,i.eq)(d.pv.id,c[0].id));let s={success:!1,message:"Gagal memproses request ke N1Panel API",error:t.message,data:{viewsAdded:0,status:"failed",processingTime:e,boostsToday:u.length,boostsRemaining:5-u.length}};return a.NextResponse.json(s,{status:500})}}catch(s){console.error("Boost endpoint error:",s);let e={success:!1,message:"Terjadi kesalahan server",error:s.message};return a.NextResponse.json(e,{status:500})}}r()}catch(e){r(e)}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4429:()=>{},4749:()=>{},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4911:(e,s,t)=>{"use strict";t.d(s,{pv:()=>c,zx:()=>l});var r=t(5050),a=t(6219),o=t(7504),n=t(5713),i=t(663),d=t(6429),u=t(3764);let p=(0,r.cJ)("users",{id:(0,a.vX)("id").primaryKey(),username:(0,o.Qq)("username").notNull().unique(),password:(0,o.Qq)("password").notNull()}),c=(0,r.cJ)("tiktok_boosts",{id:(0,a.vX)("id").primaryKey(),url:(0,o.Qq)("url").notNull(),ipAddress:(0,o.Qq)("ip_address").notNull(),status:(0,o.Qq)("status").notNull(),viewsAdded:(0,n.nd)("views_added").default(0),processingTime:(0,o.Qq)("processing_time"),orderId:(0,o.Qq)("order_id"),errorMessage:(0,o.Qq)("error_message"),createdAt:(0,i.vE)("created_at").defaultNow()});(0,d.r)(p).pick({username:!0,password:!0});let l=u.z.object({url:u.z.string().url().refine(e=>{try{let s=new URL(e);return s.hostname.includes("tiktok.com")||s.hostname.includes("vm.tiktok.com")||s.hostname.includes("vt.tiktok.com")}catch{return!1}},{message:"URL harus berupa link video TikTok yang valid"}),apiKey:u.z.string().optional()});(0,d.r)(c).pick({url:!0,ipAddress:!0})},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9617:(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{patchFetch:()=>u,routeModule:()=>p,serverHooks:()=>m,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>l});var a=t(781),o=t(554),n=t(1625),i=t(1873),d=e([i]);i=(d.then?(await d)():d)[0];let p=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/tiktok/boost/route",pathname:"/api/tiktok/boost",filename:"route",bundlePath:"app/api/tiktok/boost/route"},resolvedPagePath:"/home/runner/workspace/vercel-upload/app/api/tiktok/boost/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:c,workUnitAsyncStorage:l,serverHooks:m}=p;function u(){return(0,n.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:l})}r()}catch(e){r(e)}})}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[683,274],()=>t(9617));module.exports=r})();
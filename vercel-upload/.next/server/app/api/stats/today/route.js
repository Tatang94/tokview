(()=>{var e={};e.id=889,e.ids=[889],e.modules={762:e=>{"use strict";e.exports=import("@neondatabase/serverless")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3198:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{GET:()=>p});var a=r(6396),o=r(762),n=r(3089),i=r(872),u=r(4911),d=e([o,n]);[o,n]=d.then?(await d)():d;let l=process.env.DATABASE_URL;if(!l)throw Error("DATABASE_URL environment variable is required");let c=(0,o.neon)(l),m=(0,n.fd)(c);async function p(){try{let e=new Date;e.setHours(0,0,0,0);let t=await m.select().from(u.pv).where((0,i.RO)(u.pv.createdAt,e)),r=t.length,s=t.reduce((e,t)=>e+(t.viewsAdded||0),0),o=t.filter(e=>"completed"===e.status).length,n=r>0?Math.round(o/r*100):0,d=t.filter(e=>e.processingTime),p="0ms";if(d.length>0){let e=d.reduce((e,t)=>{let r=parseInt(t.processingTime?.replace("ms","")||"0");return e+r},0),t=Math.round(e/d.length);p=`${t}ms`}let l={videosToday:r,totalViews:s,successRate:n,avgTime:p};return a.NextResponse.json(l)}catch(e){return console.error("Stats error:",e),a.NextResponse.json({error:"Failed to get stats"},{status:500})}}s()}catch(e){s(e)}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4429:()=>{},4749:()=>{},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4911:(e,t,r)=>{"use strict";r.d(t,{pv:()=>l,zx:()=>c});var s=r(5050),a=r(6219),o=r(7504),n=r(5713),i=r(663),u=r(6429),d=r(3764);let p=(0,s.cJ)("users",{id:(0,a.vX)("id").primaryKey(),username:(0,o.Qq)("username").notNull().unique(),password:(0,o.Qq)("password").notNull()}),l=(0,s.cJ)("tiktok_boosts",{id:(0,a.vX)("id").primaryKey(),url:(0,o.Qq)("url").notNull(),ipAddress:(0,o.Qq)("ip_address").notNull(),status:(0,o.Qq)("status").notNull(),viewsAdded:(0,n.nd)("views_added").default(0),processingTime:(0,o.Qq)("processing_time"),orderId:(0,o.Qq)("order_id"),errorMessage:(0,o.Qq)("error_message"),createdAt:(0,i.vE)("created_at").defaultNow()});(0,u.r)(p).pick({username:!0,password:!0});let c=d.z.object({url:d.z.string().url().refine(e=>{try{let t=new URL(e);return t.hostname.includes("tiktok.com")||t.hostname.includes("vm.tiktok.com")||t.hostname.includes("vt.tiktok.com")}catch{return!1}},{message:"URL harus berupa link video TikTok yang valid"}),apiKey:d.z.string().optional()});(0,u.r)(l).pick({url:!0,ipAddress:!0})},6649:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{patchFetch:()=>d,routeModule:()=>p,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>c});var a=r(781),o=r(554),n=r(1625),i=r(3198),u=e([i]);i=(u.then?(await u)():u)[0];let p=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/stats/today/route",pathname:"/api/stats/today",filename:"route",bundlePath:"app/api/stats/today/route"},resolvedPagePath:"/home/runner/workspace/vercel-upload/app/api/stats/today/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:l,workUnitAsyncStorage:c,serverHooks:m}=p;function d(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:c})}s()}catch(e){s(e)}})},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[683,274],()=>r(6649));module.exports=s})();